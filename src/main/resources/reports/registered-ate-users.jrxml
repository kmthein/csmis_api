<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.20.5.final using JasperReports Library version 6.20.5-3efcf2e67f959db3888d79f73dde2dbd7acb4f8e  -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="registered-ate-users" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="52e3066e-ed77-4a60-9d02-8c38a109a3fd">
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="csmis dataadapter-Database JDBC Connection"/>
	<parameter name="timeRangeType" class="java.lang.String"/>
	<parameter name="date" class="java.util.Date"/>
	<parameter name="startDate" class="java.sql.Date"/>
	<parameter name="endDate" class="java.sql.Date"/>
	<parameter name="month" class="java.lang.Integer"/>
	<parameter name="year" class="java.lang.Integer"/>
	<queryString language="SQL">
		<![CDATA[SELECT u.name, d.door_log_no, DATE(d.date)
FROM door_access_record d
LEFT JOIN user_has_lunch ul ON d.user_id = ul.user_id AND DATE(d.date) = DATE(ul.dt)
JOIN user u ON d.user_id = u.id
        WHERE (
            ($P{timeRangeType} = 'daily' AND DATE(d.date) = $P{date})
            OR ($P{timeRangeType} = 'weekly' AND d.date BETWEEN $P{startDate} AND $P{endDate})
            OR ($P{timeRangeType} = 'monthly' AND EXTRACT(MONTH FROM d.date) = $P{month} AND EXTRACT(YEAR FROM d.date) = $P{year})
            OR ($P{timeRangeType} = 'yearly' AND EXTRACT(YEAR FROM d.date) = $P{year})
        )]]>
	</queryString>
	<field name="name" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="name"/>
		<property name="com.jaspersoft.studio.field.label" value="name"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="user"/>
	</field>
	<field name="door_log_no" class="java.lang.Integer">
		<property name="com.jaspersoft.studio.field.name" value="door_log_no"/>
		<property name="com.jaspersoft.studio.field.label" value="door_log_no"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="door_access_record"/>
	</field>
	<field name="DATE(d.date)" class="java.sql.Date">
		<property name="com.jaspersoft.studio.field.name" value="DATE(d.date)"/>
		<property name="com.jaspersoft.studio.field.label" value="DATE(d.date)"/>
	</field>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="80" splitType="Stretch">
			<image>
				<reportElement x="0" y="30" width="69" height="49" uuid="19ada8d2-e48d-493a-8222-dd4e9b041a43"/>
				<imageExpression><![CDATA[net.sf.jasperreports.engine.util.JRLoader.loadBytes(getClass().getResource("/images/DAT Logo.png"))]]></imageExpression>
			</image>
			<staticText>
				<reportElement x="355" y="30" width="84" height="29" uuid="35a4f5f8-e6b9-4318-ba18-6c27b38e8dd7"/>
				<textElement textAlignment="Left" verticalAlignment="Top">
					<font size="10" isBold="false"/>
				</textElement>
				<text><![CDATA[Report Name :]]></text>
			</staticText>
			<staticText>
				<reportElement x="355" y="60" width="84" height="20" uuid="7b6c3f72-c59d-4b96-a7da-30a2f090d7ab"/>
				<textElement textAlignment="Left">
					<font size="10" isBold="false"/>
				</textElement>
				<text><![CDATA[Report Date   :]]></text>
			</staticText>
			<textField pattern="MMMMM dd, yyyy">
				<reportElement x="440" y="60" width="100" height="20" uuid="7b21f6de-7d22-4473-b12a-0d8d42f04aad"/>
				<textElement textAlignment="Left"/>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="440" y="30" width="121" height="27" uuid="bdaadb45-bc33-4a92-9a29-1784185b3ee3"/>
				<textFieldExpression><![CDATA["Register-Ate-Users           (For "+ 
          ($P{timeRangeType}.equals("daily") ? "Daily" : 
          ($P{timeRangeType}.equals("weekly") ? "Weekly" : 
          ($P{timeRangeType}.equals("monthly") ? "Monthly" : 
          ($P{timeRangeType}.equals("yearly") ? "Yearly" : "Unknown"))))+")"]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<columnHeader>
		<band height="41" splitType="Stretch">
			<staticText>
				<reportElement mode="Opaque" x="20" y="10" width="158" height="30" forecolor="#FFFFFF" backcolor="#336699" uuid="59b1a75f-70fb-412e-a532-b53f18fa94bd">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="64a70699-8d1d-43b9-a531-b2557e16dcf9"/>
				</reportElement>
				<box leftPadding="1" rightPadding="1">
					<pen lineWidth="0.5"/>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Name]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="178" y="10" width="158" height="30" forecolor="#FFFFFF" backcolor="#336699" uuid="50f00e3c-7ac1-43a2-beac-42c8aebdd80f">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="64a70699-8d1d-43b9-a531-b2557e16dcf9"/>
				</reportElement>
				<box leftPadding="1" rightPadding="1">
					<pen lineWidth="0.5"/>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[DoorLogNo]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="336" y="10" width="158" height="30" forecolor="#FFFFFF" backcolor="#336699" uuid="bdef76eb-a6a4-49d7-86ef-12481e6dbed1">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="64a70699-8d1d-43b9-a531-b2557e16dcf9"/>
				</reportElement>
				<box leftPadding="1" rightPadding="1">
					<pen lineWidth="0.5"/>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Date]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="27" splitType="Stretch">
			<textField>
				<reportElement x="20" y="0" width="158" height="26" uuid="af772fe3-d6b9-4b81-8a8e-be564c70d9fc">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="b8793c8f-1f79-4362-9067-f863fa206891"/>
				</reportElement>
				<box leftPadding="1" rightPadding="1">
					<pen lineWidth="0.5"/>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textFieldExpression><![CDATA[$F{name}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="178" y="0" width="158" height="26" uuid="4780bcec-d755-47aa-8b89-5ae93b7338d2">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="b8793c8f-1f79-4362-9067-f863fa206891"/>
				</reportElement>
				<box leftPadding="1" rightPadding="1">
					<pen lineWidth="0.5"/>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textFieldExpression><![CDATA[$F{door_log_no}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="336" y="0" width="158" height="26" uuid="067af97e-b6df-4caf-84ba-63df5e41c76e">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="b8793c8f-1f79-4362-9067-f863fa206891"/>
				</reportElement>
				<box leftPadding="1" rightPadding="1">
					<pen lineWidth="0.5"/>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textFieldExpression><![CDATA[$F{DATE(d.date)}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<pageFooter>
		<band height="55" splitType="Stretch">
			<textField>
				<reportElement x="375" y="25" width="100" height="30" uuid="455b0a51-57c1-4042-9ba7-cabdcdcb7da3"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression><![CDATA["Page " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement x="475" y="25" width="100" height="30" uuid="5e92dc01-b3c1-4888-a5bb-1f3575d0beca"/>
				<textElement textAlignment="Left"/>
				<textFieldExpression><![CDATA[" of " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
	<summary>
		<band height="42" splitType="Stretch"/>
	</summary>
</jasperReport>
