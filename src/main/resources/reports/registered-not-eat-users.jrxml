<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.20.5.final using JasperReports Library version 6.20.5-3efcf2e67f959db3888d79f73dde2dbd7acb4f8e  -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="registered-not-eat-users" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="ad7da698-f799-4655-b3f1-c088d02d0330">
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="csmis dataadapter-Database JDBC Connection"/>
	<parameter name="timeRangeType" class="java.lang.String"/>
	<parameter name="date" class="java.util.Date"/>
	<parameter name="startDate" class="java.sql.Date"/>
	<parameter name="endDate" class="java.sql.Date"/>
	<parameter name="month" class="java.lang.Integer"/>
	<parameter name="year" class="java.lang.Integer"/>
	<queryString language="SQL">
		<![CDATA[SELECT 
    u.name, 
    u.door_log_no, 
    DATE(ul.dt) AS lunch_date
FROM 
    user_has_lunch ul
LEFT JOIN 
    door_access_record d 
    ON ul.user_id = d.user_id 
    AND DATE(ul.dt) = DATE(d.date)
JOIN 
    user u 
    ON ul.user_id = u.id
WHERE 
    d.user_id IS NULL 
    AND (
        (
            $P{timeRangeType} = 'daily' 
            AND DATE(ul.dt) = DATE($P{date})
        )
        OR (
            $P{timeRangeType} = 'weekly' 
            AND DATE(ul.dt) BETWEEN $P{startDate} AND $P{endDate}
        )
        OR (
            $P{timeRangeType} = 'monthly' 
            AND EXTRACT(MONTH FROM ul.dt) = $P{month} 
            AND EXTRACT(YEAR FROM ul.dt) = $P{year}
        )
        OR (
            $P{timeRangeType} = 'yearly' 
            AND EXTRACT(YEAR FROM ul.dt) = $P{year}
        )
    )]]>
	</queryString>
	<field name="name" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="name"/>
		<property name="com.jaspersoft.studio.field.label" value="name"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="user"/>
	</field>
	<field name="door_log_no" class="java.lang.Integer">
		<property name="com.jaspersoft.studio.field.name" value="door_log_no"/>
		<property name="com.jaspersoft.studio.field.label" value="door_log_no"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="user"/>
	</field>
	<field name="lunch_date" class="java.sql.Date">
		<property name="com.jaspersoft.studio.field.name" value="lunch_date"/>
		<property name="com.jaspersoft.studio.field.label" value="lunch_date"/>
	</field>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="80" splitType="Stretch">
			<image>
				<reportElement x="0" y="30" width="69" height="49" uuid="0c7df063-1237-4ef6-8713-d72078381dd3"/>
				<imageExpression><![CDATA[net.sf.jasperreports.engine.util.JRLoader.loadBytes(getClass().getResource("/images/DAT Logo.png"))]]></imageExpression>
			</image>
			<staticText>
				<reportElement x="355" y="30" width="84" height="29" uuid="fb74cb7e-74dc-4cc6-9125-c041faaeea53"/>
				<textElement textAlignment="Left" verticalAlignment="Top">
					<font size="10" isBold="false"/>
				</textElement>
				<text><![CDATA[Report Name :]]></text>
			</staticText>
			<textField>
				<reportElement x="440" y="30" width="121" height="27" uuid="d79f4fef-687f-4021-8afa-b050ed458c10"/>
				<textFieldExpression><![CDATA["Registered-NotAte-Users           (For "+ 
          ($P{timeRangeType}.equals("daily") ? "Daily" : 
          ($P{timeRangeType}.equals("weekly") ? "Weekly" : 
          ($P{timeRangeType}.equals("monthly") ? "Monthly" : 
          ($P{timeRangeType}.equals("yearly") ? "Yearly" : "Unknown"))))+")"]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="355" y="60" width="84" height="20" uuid="eab8c90a-cc96-437a-929d-2bf0ebee722f"/>
				<textElement textAlignment="Left">
					<font size="10" isBold="false"/>
				</textElement>
				<text><![CDATA[Report Date   :]]></text>
			</staticText>
			<textField pattern="MMMMM dd, yyyy">
				<reportElement x="440" y="60" width="100" height="20" uuid="47a8b4fb-02d4-4b21-8364-c058250fc4b0"/>
				<textElement textAlignment="Left"/>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<columnHeader>
		<band height="41" splitType="Stretch">
			<staticText>
				<reportElement mode="Opaque" x="20" y="10" width="158" height="30" forecolor="#FFFFFF" backcolor="#336699" uuid="b3246899-2917-490f-9592-5f94653875f7">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="64a70699-8d1d-43b9-a531-b2557e16dcf9"/>
				</reportElement>
				<box leftPadding="1" rightPadding="1">
					<pen lineWidth="0.5"/>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Name]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="178" y="10" width="158" height="30" forecolor="#FFFFFF" backcolor="#336699" uuid="2f9bf258-50f6-40ed-affe-c42e85dee6b4">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="64a70699-8d1d-43b9-a531-b2557e16dcf9"/>
				</reportElement>
				<box leftPadding="1" rightPadding="1">
					<pen lineWidth="0.5"/>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[DoorLogNo]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="336" y="10" width="158" height="30" forecolor="#FFFFFF" backcolor="#336699" uuid="1323cb2f-784a-47de-8fcb-b96c3f09958a">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="64a70699-8d1d-43b9-a531-b2557e16dcf9"/>
				</reportElement>
				<box leftPadding="1" rightPadding="1">
					<pen lineWidth="0.5"/>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Date]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="27" splitType="Stretch">
			<textField>
				<reportElement x="20" y="0" width="158" height="26" uuid="ec3fb1fe-a05d-4eab-ba79-fa133d1fe046">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="b8793c8f-1f79-4362-9067-f863fa206891"/>
				</reportElement>
				<box leftPadding="1" rightPadding="1">
					<pen lineWidth="0.5"/>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textFieldExpression><![CDATA[$F{name}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="178" y="0" width="158" height="26" uuid="5d068439-d533-48ab-86ed-dc71867f1901">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="b8793c8f-1f79-4362-9067-f863fa206891"/>
				</reportElement>
				<box leftPadding="1" rightPadding="1">
					<pen lineWidth="0.5"/>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textFieldExpression><![CDATA[$F{door_log_no}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="336" y="0" width="158" height="26" uuid="427bede7-0602-44fd-b41c-cb59dcc601db">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="b8793c8f-1f79-4362-9067-f863fa206891"/>
				</reportElement>
				<box leftPadding="1" rightPadding="1">
					<pen lineWidth="0.5"/>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textFieldExpression><![CDATA[$F{lunch_date}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<pageFooter>
		<band height="55" splitType="Stretch">
			<textField>
				<reportElement x="375" y="25" width="100" height="30" uuid="cabadb4a-3c8c-4070-8b25-25c6a251f274"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression><![CDATA["Page " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement x="475" y="25" width="100" height="30" uuid="79dc939f-ac0b-4fec-91e3-86b9a7e31c6f"/>
				<textElement textAlignment="Left"/>
				<textFieldExpression><![CDATA[" of " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
	<summary>
		<band height="42" splitType="Stretch"/>
	</summary>
</jasperReport>
